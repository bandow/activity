<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="description" content=""/>
    <meta name="keywords" content=""/>
    <meta name="author" content="name, sycbbb@sina.com"/>
    <meta name="robots" content="index,follow"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="format-detection" content="telephone=no, email=no,adress=no"/>
    <meta name="msapplication-tap-highlight" content="no">
    <link rel="stylesheet" href="styles/userOrders.css">
    <style>
        .dropload-up,.dropload-down{
            position: relative;
            height: 0;
            overflow: hidden;
            font-size: 12px;
            /* 开启硬件加速 */
            -webkit-transform:translateZ(0);
            transform:translateZ(0);
        }
        .dropload-refresh,.dropload-update,.dropload-load,.dropload-noData{
            text-align: center;
        }
        .dropload-load .loading{
            display: inline-block;
            height: 15px;
            width: 15px;
            border-radius: 100%;
            margin: 6px;
            border: 2px solid #666;
            border-bottom-color: transparent;
            vertical-align: middle;
            -webkit-animation: rotate 0.75s linear infinite;
            animation: rotate 0.75s linear infinite;
        }
        @-webkit-keyframes rotate {
            0% {
                -webkit-transform: rotate(0deg);
            }
            50% {
                -webkit-transform: rotate(180deg);
            }
            100% {
                -webkit-transform: rotate(360deg);
            }
        }
        @keyframes rotate {
            0% {
                transform: rotate(0deg);
            }
            50% {
                transform: rotate(180deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
    <title></title>
</head>
<body>
<div class="wrapper" id="app">
    <header class="header" style="background:url(images/subsidy_header_bg.jpg) repeat-y;background-size:100%; auto;">
        <a class="arrow-left left" href="javascript:history.go(-1);"></a>
        <h1>剁手节订单</h1>
        <a class="right" href="index.html">主会场</a>
    </header>
    <!-- 温馨提示：已获得枕头君|| 够1000元 || 未够1000元 后端要做判断把style="display:none;"都去掉-->
    <!-- 已获得枕头君 begin -->
    <section class="subsidy-title" style="display:none;">
        <h4>恭喜你已获得枕头君一个！</h4>
        <h5>限量版枕头君在向你跑来，请耐心等待哦~</h5>
        <div class="title-list">
            <div class="items">
                <div class="items-content">
                    <h3>收货信息</h3>
                    <p class="see-info">查看收货信息</p>
                </div>
            </div>
            <div class="items">
                <div class="items-content">
                    <h3>戳我赚积分</h3>
                    <p class="integral">待赠送积分<i><img src="images/i_icon.png" alt=""></i></p>
                </div>    
            </div>
        </div>
    </section>
    <!-- 够1000元 begin -->
    <section class="subsidy-title" style="display:block;">
        <h4>恭喜你已抢到限量版枕头君！</h4>
        <h5>温馨提示：若订单退款致订单累计金额低于1000元 </h5>
        <h5>将会扣除限量版枕头君的相应价值哦~</h5>
        <div class="title-list">
            <div class="items">
                <div class="items-content">
                    <h3>确认领取</h3>
                    <p class="information">填写收货信息</p>
                </div>
            </div>
            <div class="items">
                <div class="items-content">
                    <h3>600</h3>
                    <p>待赠送积分<i><img src="images/i_icon.png" alt=""></i></p>
                </div>    
            </div>
        </div>
    </section>
    <!-- 未够1000元 begin -->
    <section class="subsidy-title" style="display:none;">
        <h4 style="color:#534115;">订单金额累计满1000元，可获得限量版枕头君</h4>
        <h5>还没满1000元？去免单专区凑单买买买吧！</h5>
        <div class="title-list">
            <div class="items">
                <div class="items-content">
                    <h3>￥780 </h3>
                    <p class="aggregate-anmtmt">累计金额<i><img src="images/i_icon.png" alt=""></i></p>
                </div>
            </div>
            <div class="items">
                <div class="items-content">
                    <h3>戳我赚积分</h3>
                    <p>待赠送积分<i><img src="images/i_icon.png" alt=""></i></p>
                </div>    
            </div>
        </div>
    </section>
    <section class="subsidy-list" style="background:url(images/subsidy_list_bg.jpg) repeat-y;background-size:100%; auto;">
        <div class="subsidy-list-content">
            <div class="items">
                <p>订单号：12345678987456321<span>10/17 18:36</span></p>
                <div class="text-img">
                    <div class="left">
                        <img src="" alt="">
                    </div>
                    <div class="right">
                        <h3>5晚套票，我也支持拆分使用随时退</h3>
                        <p>数量：1</p>
                        <div class="foot">
                            <span>￥<strong>462</strong></span>
                            <div class="btn">
                                <a href="">详情</a>
                                <a href="">退款</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="items">
                <p>购买时间：2017-10-17 18:36</p>
                <div class="text-img">
                    <div class="left">
                        <img src="" alt="">
                    </div>
                    <div class="right">
                        <h3>5晚套票，我也支持拆分使用随时退</h3>
                        <p>数量：1</p>
                        <div class="foot">
                            <span>￥<strong>462</strong></span>
                            <div class="btn">
                                <a href="">详情</a>
                                <a href="">退款</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="items">
                <p>购买时间：2017-10-17 18:36</p>
                <div class="text-img">
                    <div class="left">
                        <img src="" alt="">
                    </div>
                    <div class="right">
                        <h3>5晚套票，我也支持拆分使用随时退</h3>
                        <p>数量：1</p>
                        <div class="foot">
                            <span>￥<strong>462</strong></span>
                            <div class="btn">
                                <a href="">详情</a>
                                <a href="">退款</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="dropload-load items-loading"><span class="loading"></span>加载中...</div>
        </div>
        <!-- 空数据 begin -->
        <!-- 温馨提示：后端人员判断的时候把style="display:none"去掉 -->
        <div class="subsidy-null" style="display:none">
            <div class="null">
                <div class="img"></div>
                <p>点击右上角的赚钱攻略</p>
                <p>了解更多赚补贴金技巧</p>
            </div>
        </div>
        <!-- 空数据 end -->
    </section>
</div>
<div class="public-mask"></div>
<!-- 订单满1000元，点击填写地址 begin -->
<div class="mask-rule" style="background-color:#f3ece4;">
    <div class="rule-content">
        <h2>收货信息</h2>
        <div class="text">
           <div class="item">
               <span>联系人</span>
               <label><input id="name" type="text"></label>
           </div>
           <div class="item">
               <span>手机</span>
               <label><input id="phone" type="tel"></label>
           </div>
           <div class="item">
               <span>地址</span>
               <label class="address"><textarea id="addressInfo"></textarea></label>
           </div>
        </div>
        <a class="submit" href="javascript:;">提交</a>
    </div>
</div>
<!-- 订单满1000元，点击填写地址 end -->
<!-- script begin -->
<script src="scripts/flexible.js"></script>
<script src="scripts/jquery-3.1.1.min.js"></script>
<script>
    $(document).ready(function(){
        var page=0;
        var flag=true;
        var windowHeight=$(window).height();
        var headerHeight=$(".header").outerHeight();
        var subsidyTitleHeight=$(".subsidy-title").outerHeight();
        var itemsHeight=$(".subsidy-list-content .items").outerHeight();
        var subsidyListContentHeight=windowHeight-headerHeight-subsidyTitleHeight;
        $(".subsidy-list-content").css("min-height",subsidyListContentHeight);
        $(".subsidy-null").css("min-height",subsidyListContentHeight);
     
        $(window).scroll(function() {
            var bottomsubmit = $('.items-loading').offset().top;
            var nowtop = $(document).scrollTop()+windowHeight;
            console.log(bottomsubmit,nowtop);
            if(nowtop>bottomsubmit){
                if(flag==true){
                    flag=false;
                    $(".items-loading").show();
                    page++;
                    console.log(page);
                    setTimeout(function(){
                        $(".items-loading").hide(); 
                        // ajax加载第二页  定时器可以不需要的 调数据的时候定时器可以去掉
                    },5000);
                }   
            }
        });

        $(".aggregate-anmtmt").on("click",function(){
            maskRule('什么是待赠送积分','1.每邀请1位好友购买新会员首住99元/晚的产品，即可获得赠送200积分的资格；'+'<p>'+'2.好友入住离店后，这部分积分会发放到会员账户中'+'<p>'+'3.积分发放日期为好友入住离店后的次月15日，请耐心等待哦'+'<p>'+'4.若好友未入住或取消订单，则这部分的积分没办法赠送哦~');
        });
        $(".integral").on("click",function(){
            maskRule('什么是待赠送积分','1.每邀请1位好友购买新会员首住99元/晚的产品，即可获得赠送200积分的资格；'+'<p>'+'2.好友入住离店后，这部分积分会发放到会员账户中'+'<p>'+'3.积分发放日期为好友入住离店后的次月15日，请耐心等待哦'+'<p>'+'4.若好友未入住或取消订单，则这部分的积分没办法赠送哦~');
        }); 
        $(".see-info").on("click",function(){
            maskRule('收货信息','福建人 ，136 0000 0000'+'<p>'+'广州市白云区大金钟路65号东呈国际集团有限公司9楼会员电商部');
        });
        //收货信息
        $(".information").on("click",function(){
            $(".public-mask").show();
            $(".mask-rule").addClass("mask-rule-active");
        });
        $(".public-mask").on("click",function(){
            $(".public-mask").hide();
            $(".mask-rule").removeClass("mask-rule-active");
        });
        $(".submit").on("click",function(){
            submitRegister();
        });

    });
    // 疑问弹窗方法
    function maskRule(title,msg){
        var documentBody=$(document.body);
        var html='';
        html+='<div class="mask-rule">';
        html+='<div class="rule-content">';
        html+='<h2>'+title+'</h2>';
        html+='<div class="text">';
        html+='<p>'+msg+'</p>';
        html+='</div>';
        html+='<a class="close" href="javascript:;">朕知道了</a>';
        html+='</div>';
        html+='</div>';
        documentBody.append(html);
        setTimeout(function(){
            $(".mask-rule").addClass("mask-rule-active");
        },0)
        $(".public-mask").show();
        $(".public-mask").on("click",function(){
            $(".public-mask").hide();
            $(".mask-rule").removeClass("mask-rule-active");
            setTimeout(function(){
                $(".mask-rule").remove();
            },500)
        });
        $(".close").on("click",function(){
            $(".public-mask").hide();
            $(".mask-rule").removeClass("mask-rule-active");
            setTimeout(function(){
                $(".mask-rule").remove();
            },500)
        });
    }
    //手机验证
    function checkPhone(phone) {
        var m = phone.match(/^\s*(\S+(\s+\S+)*)\s*$/);
        phone = (m == null) ? "" : m[1];
        return (/(^0{0,1}1[3|4|5|6|7|8|9][0-9]{9}$)/.test(phone));
    }
    //注册提交
    function submitRegister(){
        var Name = $("#name").val().trim();
        var Tel = $("#phone").val().trim();
        var Address = $("#addressInfo").val().trim();
        if (Name == "") {
            console.log("联系人不能为空");
            return false;
        }
        if (Tel == "") {
            console.log("手机号不能为空");
            return false;
        }
        else if (!checkPhone(Tel)) {
            console.log("手机号输入有误!");
            return false;
        }
        if(Address =="" ){
            console.log("地址不能为空");
            return false;
        }
        $(".public-mask").hide();
        $(".mask-rule").removeClass("mask-rule-active");
        console.log("注册成功");
    }
</script>
<!-- script end -->
</body>
</html>